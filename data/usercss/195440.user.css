/* ==UserStyle==
@name           Nebula - Dark (customizable)
@namespace      USO Archive
@author         Parker Addison
@description    `A comprehensive dark theme for watchnebula.com, with customizable colors by changing the variables in :root.I tried my best to work out all of the kinks!`
@version        202113.8.46
@license        CC-BY-4.0
@preprocessor   uso
==/UserStyle== */
@-moz-document domain("watchnebula.com") {
/* 
   This css file is meant to be applied to watchnebula.com in order to emulate
   a dark theme. You can use a Firefox addon like Stylus or Chrome extension
   like Stylish to apply these rules to all urls on the watchnebula.com domain.
   The variables defined in :root can be modified to change colors across the
   entire site.

   This was written by Parker Addison, and the most up-to-date version can be
   found at:
   https://gist.github.com/parkeraddison/6b0c4735b6bb48debb007c2fd884178d
*/

:root {
    --background: #24292e;
    --background-alt: #1f2428;
    --nebula-navy: #00141e;
    --text: #eee;
    --text-alt: #888;
}

/* === MAIN RECOLOR ========================================================= */

/* Start by making everything have a dark background and light text. We'll make
   tweaks to other stuff, but this takes care of most of the page! */
body,
#NebulaApp div > [class^="css"] {
    background: var(--background);
    color: var(--text);
}

/* Headers get some special treatment */
h1,
h2,
h3,
h4,
h5,
h6 {
    color: var(--text) !important;
    /* Descenders were being cut off by the background (whoops) */
    line-height: 2;
}

/* Some things should be darker than others! Namely the menu and nav bar. */
menu,
menu div {
    /* We'll utilize the same background variable across all menu elements. */
    --background-menu: var(--background-alt); /* Could also use nebula-navy */
    background: var(--background-menu) !important;
    color: var(--text) !important;
}
nav,
nav div {
    --background-nav: var(--background-alt);
    background: var(--background-nav) !important;
    color: var(--text) !important;
}

/* The bottom of the page is supposed to have an alternate background too. */
#NebulaApp > :nth-child(2) > :nth-child(2) > :last-child,
#NebulaApp > :nth-child(2) > :nth-child(2) > :last-child * {
    background: var(--nebula-navy) !important;
}

/* === MENU TWEAKS ========================================================== */

/* The links in the menu are weird now, let's fix those. */
menu a {
    background: var(--background-menu) !important;
}
/* Only the logo in the middle of the menu should change its background -- not
   the search icon! */
/* NOTE: Turns out this also selects the profile icon... whoops! */
menu img:first-child {
    background: none !important;
}
menu form {
    border-radius: 100% !important;
}
menu input {
    color: var(--text) !important;
    background-color: var(--background) !important;
}

/* === NAV TWEAKS =========================================================== */

/* Let's do the image background fixes for the nav bar too. Unforunately because
   they're not SVGs rather rasters we can't change their fill color directly.
   What we *can* do is use an invert filter! At 100% invert it makes the star
   look wonky, but if we do a 50% invert then everything becomes nice and medium
   gray :) Going a little more/less than 50% lets us play with the colors. */
nav img {
    background: none !important;
    filter: invert(30%)
}

/* === CARD TWEAKS ========================================================== */

/* The main content cards should have light text and dark borders. */
a div {
    border-color: var(--background-alt) !important;
    color: var(--text) !important;
}
/* Remove white backgrounds on images which cause border artifacts. The
   featured cards also have these artifacts. */
a img,
a picture,
div[class^="slick"] div {
    background: none !important;
}
/* And we'll make the creator/category item slightly dimmer than the title. */
a div:nth-of-type(2) {
    color: var(--text-alt) !important;
}

/* === VIDEO TWEAKS ========================================================= */

/* To get a rounded iframe effect the devs added four divs at each corner of the
   video. These need to have a transparent background color for the effect to
   works -- we can use opacity instead. */
iframe ~ div {
    opacity: 0;
}

/* === ADDITIONAL TWEAKS ==================================================== */

/* I personally found the blue star at the top just a bit too distracting. */
menu img:first-child {
    filter: invert(20%);
}

/* This isn't a color tweak, but it bothered me. While we're at it how about we
   give that video player some breathing room! */
div[id^="zype"] {
    margin: 2.2em auto;
}

}